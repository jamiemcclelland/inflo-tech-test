@model UserPageViewModel

<h2>User List</h2>

<div class="table-responsive">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Id</th>
                <th>Forename</th>
                <th>Surname</th>
                <th>Date of Birth</th>
                <th>Email</th>
                <th>Account Active</th>
                <th style="width: 1px;"></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var user in Model.Users)
            {
                <tr>
                    <td>
                        @user.Id
                    </td>
                    <td>
                        @user.Forename
                    </td>
                    <td>
                        @user.Surname
                    </td>
                    <td>
                        @user.DateOfBirth
                    </td>
                    <td>
                        @user.Email
                    </td>
                    <td>
                        @(user.IsActive ? "Yes" : "No")
                    </td>
                    <td>
                        <div class="dropdown">
                            <button type="button" class="btn btn-default dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false" id="btnToggleActions">
                                Actions
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="btnToggleActions">
                                <li><a class="dropdown-item" href="#">View</a></li>
                                <li><a class="dropdown-item" href="#">Edit</a></li>
                                <li><a class="dropdown-item" href="#">Delete</a></li>
                            </ul>
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

<div>
    <div class="btn-group" role="group">
        <a asp-controller="Users" asp-action="List" asp-route-isActive="" class="btn btn-default">Show All</a>
        <a asp-controller="Users" asp-action="List" asp-route-isActive="true" class="btn btn-default">Active Only</a>
        <a asp-controller="Users" asp-action="List" asp-route-isActive="false" class="btn btn-default">Non Active</a>
    </div>

    <a href="#" data-bs-toggle="offcanvas" data-bs-target="#addUserSidebar" class="btn btn-primary float-end">
        Add User
    </a>
</div>

@* <!-- Modal -->
<div class="modal fade" id="filterModal" tabindex="-1" aria-labelledby="filterModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="filterModalLabel">Confirm Filter</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Do you want to filter the list to only show active users?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <a id="confirmFilterBtn" class="btn btn-success">Yes, show active</a>
      </div>
    </div>
  </div>
</div> *@

<!-- Sidebar form -->
<div class="offcanvas offcanvas-end" id="addUserSidebar" tabindex="-1">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title">Add New User</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
    </div>
    <div class="offcanvas-body">
        <form id="addUserForm" asp-controller="Users" asp-action="Create" method="post">
            <div class="mb-3">
                <label asp-for="NewUser.Forename" class="form-label"></label>
                <input asp-for="NewUser.Forename" class="form-control" />
                <span asp-validation-for="NewUser.Forename" class="text-danger d-none"></span>
            </div>

            <div class="mb-3">
                <label asp-for="NewUser.Surname" class="form-label"></label>
                <input asp-for="NewUser.Surname" class="form-control" />
                <span asp-validation-for="NewUser.Surname" class="text-danger d-none"></span>
            </div>

            <div class="mb-3">
                <label asp-for="NewUser.DateOfBirth" class="form-label">Date of Birth</label>
                <input asp-for="NewUser.DateOfBirth" class="form-control" />
                <span asp-validation-for="NewUser.DateOfBirth" class="text-danger d-none"></span>
            </div>


            <div class="mb-3">
                <label asp-for="NewUser.Email" class="form-label">Email Address</label>
                <input asp-for="NewUser.Email" class="form-control" />
                <span asp-validation-for="NewUser.Email" class="text-danger d-none"></span>
            </div>

            <div class="form-check mb-3">
                <input asp-for="NewUser.IsActive" class="form-check-input" />
                <label asp-for="NewUser.IsActive" class="form-check-label"></label>
            </div>

            <button type="submit" class="btn btn-success" id="saveButton">Save</button>
        </form>
    </div>
</div>

@section Scripts {
    <script>
        $(function () {
            var form = $("#addUserForm");

            form.on("submit", function (e) {
                if (!form.valid()) {
                    e.preventDefault();
                    form.find("span.field-validation-error").removeClass("d-none");
                } else {}
            });
        });
    </script>
}
